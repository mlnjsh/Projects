# Beamer + Manim Animated Presentation Project

## Project Overview

This project creates a Beamer (LaTeX) presentation with embedded Manim animations. Manim generates mathematical animations as video files, which are then converted to PNG frame sequences and embedded into Beamer slides using the `animate` LaTeX package.

---

## Project Structure

```
project/
├── CLAUDE.md                  # This file — project instructions for Claude Code
├── slides.tex                 # Main Beamer LaTeX presentation source
├── manim_scenes.py            # All Manim animation scene classes
├── Makefile                   # Build automation (render, convert, compile)
├── preamble.tex               # (Optional) Shared LaTeX preamble for Beamer
├── references.bib             # (Optional) Bibliography if needed
├── media/                     # Auto-generated by Manim (do not edit manually)
│   └── videos/
│       └── manim_scenes/
│           └── 1080p60/       # Rendered .mp4 files
├── frames/                    # Extracted PNG frames for each animation
│   ├── gradient_descent/      # One subfolder per animation scene
│   │   ├── frame_0001.png
│   │   ├── frame_0002.png
│   │   └── ...
│   └── neural_network/
│       └── ...
├── figures/                   # Static images, diagrams, logos
└── output/
    └── slides.pdf             # Final compiled presentation
```

---

## Build Pipeline

Follow these steps in order. Each step depends on the previous one.

### Step 1 — Render Manim Animations

```bash
# Render a single scene (draft quality for testing)
manim render -ql manim_scenes.py SceneName

# Render a single scene (production quality: 1080p, 60fps)
manim render -qh manim_scenes.py SceneName

# Render ALL scenes in the file
manim render -qh manim_scenes.py
```

- Output location: `media/videos/manim_scenes/1080p60/SceneName.mp4`
- Use `-ql` (low quality, 480p15) for fast iteration during development.
- Use `-qh` (high quality, 1080p60) for final renders.

### Step 2 — Convert Videos to PNG Frame Sequences

```bash
# Create frames directory for the scene
mkdir -p frames/scene_name

# Extract frames using ffmpeg
ffmpeg -i media/videos/manim_scenes/1080p60/SceneName.mp4 \
       -vf "fps=30" \
       frames/scene_name/frame_%04d.png
```

- Use `fps=30` for smooth animation in PDF. Adjust down to `fps=15` for smaller file size.
- Frame numbering starts at `frame_0001.png`.
- Count total frames: `ls frames/scene_name/ | wc -l`

### Step 3 — Compile LaTeX

```bash
# Single compilation (usually sufficient)
pdflatex -output-directory=output slides.tex

# If using bibliography
pdflatex -output-directory=output slides.tex
bibtex output/slides
pdflatex -output-directory=output slides.tex
pdflatex -output-directory=output slides.tex
```

---

## Conventions and Rules

### Manim Scenes

- **One scene class per animation.** Each Manim `Scene` subclass corresponds to exactly one animation in the presentation.
- **Naming:** Use descriptive PascalCase class names that match the concept (e.g., `GradientDescentVisualization`, `BackpropFlow`).
- **Resolution:** Default to 1080p (1920×1080). Beamer slides are widescreen 16:9.
- **Duration:** Keep animations between 3–15 seconds. Longer animations should be split into multiple scenes.
- **Colors:** Use a consistent color palette. Define colors at the top of `manim_scenes.py`.
- **Text in animations:** Use `MathTex` for equations, `Text` for labels. Keep font sizes readable at slide scale.

### Beamer Slides

- **Animation embedding:** Always use the `animate` package with `\animategraphics`.
- **Frame rate:** Match the `fps` value in `\animategraphics` to the fps used in ffmpeg extraction.
- **Aspect ratio:** Use `aspectratio=169` in Beamer document class options.
- **Static fallback:** For each animation slide, consider adding a static key-frame version as a fallback using `\includegraphics`.

### Template for Embedding an Animation

```latex
% In preamble
\usepackage{animate}
\usepackage{graphicx}

% On a slide
\begin{frame}{Slide Title}
  \centering
  \animategraphics[
    loop,
    autoplay,
    controls,
    width=0.9\textwidth
  ]{30}                              % frame rate (fps)
  {frames/scene_name/frame_}         % path prefix
  {0001}                             % first frame number
  {0090}                             % last frame number
\end{frame}
```

**Important:** Update the last frame number to match the actual frame count for each animation.

### File Naming

- Manim scene folders in `frames/`: lowercase_with_underscores matching the scene name.
- Static figures: descriptive names in `figures/`, e.g., `loss_landscape.png`.
- No spaces in any file or folder names.

---

## Dependencies

### Python

- Python 3.10 or higher
- `manim` (Community Edition): `pip install manim`
- Additional Python packages as needed (numpy, etc. — Manim installs most)

### System Tools

- `ffmpeg` — for converting .mp4 to PNG frames
- `pdflatex` — for compiling Beamer slides (part of a TeX distribution)
- A TeX distribution: TeX Live (Linux/Mac) or MiKTeX (Windows)

### LaTeX Packages (in slides.tex preamble)

- `beamer` — presentation framework
- `animate` — frame-by-frame animation in PDF
- `graphicx` — image inclusion
- `amsmath`, `amssymb` — math typesetting
- `hyperref` — links (loaded by Beamer automatically)
- `xcolor` — color definitions

### Install Commands

```bash
# Python dependencies
pip install manim

# Ubuntu/Debian system dependencies
sudo apt-get install ffmpeg texlive-full

# macOS (with Homebrew)
brew install ffmpeg
brew install --cask mactex
```

---

## PDF Viewer Compatibility

The `animate` package works in these PDF viewers:

| Viewer               | Animated Playback | Notes                          |
|----------------------|-------------------|--------------------------------|
| Adobe Acrobat Reader | Yes               | Best support, recommended      |
| Okular               | Partial           | May work with some settings    |
| PDF.js (browsers)    | No                | Shows first frame only         |
| Preview (macOS)      | No                | Shows first frame only         |
| Evince               | No                | Shows first frame only         |

**Recommendation:** Always test final PDF in Adobe Acrobat Reader. For presenting on systems without Acrobat, consider exporting a video version of the talk as a backup.

---

## Common Tasks for Claude Code

When asked to work on this project, here are typical tasks and how to handle them:

1. **"Add a new animation"** → Create a new Scene class in `manim_scenes.py`, render it, extract frames, add a new `\begin{frame}` block in `slides.tex`.

2. **"Update an existing animation"** → Modify the Scene class, re-render, re-extract frames (overwrite), update frame count in `slides.tex` if duration changed.

3. **"Add a static slide"** → Add a new `\begin{frame}` in `slides.tex` with standard Beamer content. No Manim needed.

4. **"Change the theme/colors"** → Modify the Beamer theme in `slides.tex` preamble and the color palette at the top of `manim_scenes.py`.

5. **"Build everything"** → Run the full pipeline: render all scenes → extract all frames → compile LaTeX.

---

## Troubleshooting

- **Animation not playing in PDF:** Likely a viewer issue. Use Adobe Acrobat Reader.
- **Frame count mismatch:** Recount frames with `ls frames/scene_name/ | wc -l` and update `\animategraphics` last frame number.
- **Manim render fails:** Check Python version and Manim installation. Run `manim --version` to verify.
- **Large PDF file size:** Reduce fps in ffmpeg extraction (e.g., `fps=15`), reduce resolution, or use `-ql` quality.
- **Blank animation on slide:** Verify the frame path prefix in `\animategraphics` matches the actual file paths. Paths are relative to `slides.tex` location.

---

## Quality Checklist (Before Final Export)

- [ ] All Manim scenes render without errors at high quality (`-qh`)
- [ ] Frame sequences extracted at consistent fps
- [ ] All `\animategraphics` frame counts match actual frame counts
- [ ] PDF tested in Adobe Acrobat Reader with animations playing
- [ ] Slide text is readable and not obscured by animations
- [ ] Color palette is consistent between Manim animations and Beamer theme
- [ ] No file path issues (all paths relative, no spaces)
